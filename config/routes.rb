Rails.application.routes.draw do

  # You can have the root of your site routed with "root"
  root 'welcome#index'
  get '/', to: 'welcome#index'
  get '/dashboard', to: 'welcome#dashboard'
  get '/deposit', to: "welcome#deposit"
  get '/help', to: 'welcome#help'
  get '/items', to: 'welcome#items'
  get '/policies', to: 'welcome#policies'

  # authentication routes
  match '/auth/:provider/callback', to: 'sessions#create', via: [:get, :post]
  match '/login', to: 'sessions#new', as: :login, via: [:get, :post]
  match '/logout', to: 'sessions#destroy', as: :logout, via: [:get, :post]

  match '/auth/failure', to: 'sessions#unauthorized', as: :unauthorized, via: [:get, :post]

  # catch unknown routes, but ignore datatables and progress-job routes, which are generated by engines.
  match "/*a" => "errors#error404", :constraints => lambda{|req| req.path !~/progress-job/ && req.path !~ /datatables/ }, via: [ :get, :post, :patch, :delete ]

end
