- provide(:body_id, "messages")
- provide(:title, "Messages")

%h1 Messages

- @messages.each do |message|
  .card.mb-3
    .card-body
      .row
        .col-sm-6
          %h4 Request
          %dl
            %dt Sent
            %dd= message.updated_at
            %dt Operation
            %dd
              - if message.operation == Message::Operation::DELETE
                %span.badge.badge-danger
                  = message.operation
              - else
                %span.badge.badge-primary
                  = message.operation
            - if message.bitstream_id
              %dt Bitstream ID
              %dd= message.bitstream_id
              %dt Item
              %dd= link_to(message.bitstream.item.title, message.bitstream.item)
            - if message.staging_key.present?
              %dt Staging Key
              %dd
                %code= message.staging_key
            - if message.target_key.present?
              %dt Target Key
              %dd
                %code= message.target_key
            %dt Medusa UUID
            %dd= link_to(message.medusa_uuid,  message.medusa_url)
        .col-sm-6
          %h4 Response
          - if message.response_time
            %dl
              %dt Received
              %dd= message.response_time
              %dt Status
              %dd
                - if message.status == "ok"
                  %span.badge.badge-success
                    = message.status
                - else
                  %span.badge.badge-danger
                    = message.status
              %dt Medusa UUID
              %dd= link_to(message.medusa_uuid,  message.medusa_url)
              - if message.error_text.present?
                %dt Error Text
                %dd= message.error_text
          - else
            %p No response received.