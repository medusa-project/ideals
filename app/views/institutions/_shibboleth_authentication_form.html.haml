-# @param institution [Institution]

= form_for(institution, url: institution_settings_path(institution), remote: true) do |f|
  .error-messages
    -# populated via ajax by shared/_validation_messages.js.erb

  .mb-3
    .form-check
      = f.check_box(:shibboleth_auth_enabled,
                    value:   "true",
                    checked: f.object.shibboleth_auth_enabled,
                    id:      "shibboleth-auth-enabled",
                    class:   "form-check-input")
      %label.form-check-label{for: "shibboleth-auth-enabled"}
        Enabled

  .mb-3
    = f.label :shibboleth_org_dn, "Organization DN"
    = f.text_field :shibboleth_org_dn, class: "form-control"
  .mb-3
    = f.label :shibboleth_email_attribute, "Email Attribute"
    = f.text_field :shibboleth_email_attribute, class: "form-control"
  .mb-3
    = f.label :shibboleth_name_attribute, "Name Attribute"
    = f.text_field :shibboleth_name_attribute, class: "form-control"
  .mb-3
    = f.label :shibboleth_extra_attributes, "Extra Attributes"
    = text_area_tag "institution[shibboleth_extra_attributes]",
                    f.object.shibboleth_extra_attributes&.join(","),
                    rows: 5, class: "form-control"
    %p.form-text
    = icon_for(:info)
    Separate attributes with commas.

  .clearfix
    .float-end
      %button.btn.btn-light{"data-bs-dismiss": "modal", type: "button"} Cancel
      = f.submit("Save Changes", class: "btn btn-primary")
