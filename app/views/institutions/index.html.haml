- provide :body_id, "institutions"
- provide :title, "All Institutions"

- if policy(Institution).new?
  .btn-group.float-end{role: "group"}
    -# Add Institution button
    %button.btn.btn-light.add-institution{"data-bs-target": "#add-institution-modal",
                                          "data-bs-toggle": "modal",
                                          type:             "button"}
      %i.fa.fa-plus
      Add Institution

%h1 All Institutions

%table.table
  %thead
    %tr
      %th
      %th Name
      %th Service Name
      %th Scope URL
  %tbody
    - @institutions.each do |institution|
      %tr
        %td.text-center
          - if institution.outgoing_message_queue.blank?
            .text-danger= icon_for(:warning)
        %td= link_to(institution.name, institution)
        %td= link_to(institution.service_name, institution)
        %td
          %code= link_to(institution.scope_url, institution.scope_url)

= render partial: "shared/xhr_modal",
         locals: { id: "add-institution-modal", title: "Add Institution" }