%header
  = render partial: 'layouts/library_header'
  %nav.navbar.navbar-expand-md{role: "navigation"}
    = link_to 'IDEALS', root_path, class: 'navbar-brand'
    %button.navbar-toggler{"aria-controls": "navbarColor01",
                           "aria-expanded": "false",
                           "aria-label": "Toggle navigation",
                           "data-target": "#navbarColor01",
                           "data-toggle": "collapse",
                           type: "button"}
      %span.navbar-toggler-icon
    #navbarColor01.collapse.navbar-collapse
      %ul.navbar-nav.mr-auto
        - if logged_in?
          %li#dashboard-nav.nav-item
            = link_to dashboard_path, class: "nav-link" do
              %i.fa.fa-tachometer-alt
              Dashboard
        %li#deposit-nav.nav-item
          = link_to deposit_path, class: "nav-link" do
            %i.fa.fa-plus
            Deposit
        %li#find-nav.nav-item.dropdown
          %a#find-dropdown.nav-link.dropdown-toggle{href: "#", role: "button",
                                                    "data-toggle": "dropdown",
                                                    "aria-haspopup": "true",
                                                    "aria-expanded": "false"}
            %i.fa.fa-search
            Find
          .dropdown-menu{"aria-labelledby": "find-dropdown"}
            = link_to units_path, class: "dropdown-item" do
              = icon_for(Unit)
              Academic Units
            = link_to collections_path, class: "dropdown-item" do
              = icon_for(Collection)
              Collections
            = link_to items_path, class: "dropdown-item" do
              = icon_for(Item)
              Items
        %li#policies-nav.nav-item
          = link_to "https://wiki.illinois.edu//wiki/display/IDEALS/IDEALS+Resources+and+Information", class: 'nav-link' do
            %i.fa.fa-info-circle
            About
      - re = policy(RegisteredElement).index?
      - mp = policy(MetadataProfile).index?
      - sp = policy(SubmissionProfile).index?
      - u  = policy(User).index?
      - ug = policy(UserGroup).index?
      - if re || mp || sp || u || ug
        %ul.navbar-nav.my-2.my-lg-0
          %li#administration-nav.nav-item.dropdown
            %a#administration-dropdown.nav-link.dropdown-toggle{href: "#", role: "button", "data-toggle": "dropdown", "aria-haspopup": "true", "aria-expanded": "false"}
              %i.fa.fa-lock-open
              Administration
            .dropdown-menu.dropdown-menu-right{"aria-labelledby": "administration-dropdown"}
              - if re
                = link_to registered_elements_path, class: 'dropdown-item' do
                  = icon_for(RegisteredElement)
                  Element Registry
              - if mp
                = link_to metadata_profiles_path, class: 'dropdown-item' do
                  = icon_for(MetadataProfile)
                  Metadata Profiles
              - if sp
                = link_to submission_profiles_path, class: 'dropdown-item' do
                  = icon_for(SubmissionProfile)
                  Submission Profiles
              .dropdown-divider
              - if u
                = link_to users_path, class: 'dropdown-item' do
                  %i.fa.fa-user
                  Users
              - if ug
                = link_to user_groups_path, class: 'dropdown-item' do
                  %i.fa.fa-users
                  User Groups