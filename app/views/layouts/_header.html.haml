%header
  = render partial: 'layouts/library_header'
  %nav.navbar.navbar-expand-lg{role: "navigation"}
    = link_to 'IDEALS', root_path, class: 'navbar-brand'
    %button.navbar-toggler{"aria-controls": "navbar-supported-content",
                           "aria-expanded": "false",
                           "aria-label": "Toggle navigation",
                           "data-target": "#navbar-supported-content",
                           "data-toggle": "collapse",
                           type: "button"}
      %span.navbar-toggler-icon
    #navbar-supported-content.collapse.navbar-collapse
      %ul.navbar-nav.mr-auto
        - if logged_in?
          %li#dashboard-nav.nav-item
            = link_to dashboard_path, class: "nav-link" do
              %i.fa.fa-tachometer-alt
              Dashboard
        %li#deposit-nav.nav-item
          = link_to deposit_path, class: "nav-link" do
            %i.fa.fa-plus
            Submit an Item
        %li#browse-nav.nav-item
          = link_to units_path, class: "nav-link" do
            = icon_for(Unit)
            Browse
        %li#policies-nav.nav-item
          = link_to "https://wiki.illinois.edu//wiki/display/IDEALS/IDEALS+Resources+and+Information", class: 'nav-link' do
            %i.fa.fa-info-circle
            About
        - re = policy(RegisteredElement).index?
        - mp = policy(MetadataProfile).index?
        - sp = policy(SubmissionProfile).index?
        - u  = policy(User).index?
        - ug = policy(UserGroup).index?
        - if re || mp || sp || u || ug
          %li#administration-nav.nav-item.dropdown
            %a#administration-dropdown.nav-link.dropdown-toggle{href: "#", role: "button", "data-toggle": "dropdown", "aria-haspopup": "true", "aria-expanded": "false"}
              %i.fa.fa-lock-open
              Administration
            .dropdown-menu.dropdown-menu-right{"aria-labelledby": "administration-dropdown"}
              - if re
                = link_to registered_elements_path, class: 'dropdown-item' do
                  = icon_for(RegisteredElement)
                  Element Registry
              - if mp
                = link_to metadata_profiles_path, class: 'dropdown-item' do
                  = icon_for(MetadataProfile)
                  Metadata Profiles
              - if sp
                = link_to submission_profiles_path, class: 'dropdown-item' do
                  = icon_for(SubmissionProfile)
                  Submission Profiles
              .dropdown-divider
              - if u
                = link_to users_path, class: 'dropdown-item' do
                  %i.fa.fa-user
                  Users
              - if ug
                = link_to user_groups_path, class: 'dropdown-item' do
                  %i.fa.fa-users
                  User Groups
      = form_tag items_path, method: "get", class: "form-inline my-2 my-lg-0 mr-3" do
        .input-group.mr-3
          %input.form-control{name: "q", type: "search", placeholder: "Search", "aria-label": "Search"}
          .input-group-append
            %button{type: "submit", class: "btn btn-outline-secondary"}
              %i.fa.fa-search