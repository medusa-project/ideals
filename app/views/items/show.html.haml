- provide :body_id, "show_item"
- provide :title, @resource.title

= render partial: "show_button_group"

%h1= @resource.title

%ul.nav.nav-tabs{role: "tablist"}
  %li.nav-item
    %a#metadata-tab.nav-link.active{href: "#metadata-tab-content",
                                    "data-toggle": "tab",
                                    role: "tab",
                                    "aria-controls": "metadata-tab-content",
                                    "aria-selected": "true"}
      = icon_for(AscribedElement)
      Metadata
  %li.nav-item
    %a#properties-tab.nav-link{href: "#properties-tab-content",
                               "data-toggle": "tab",
                               role: "tab",
                               "aria-controls": "properties-tab-content",
                               "aria-selected": "true"}
      %i.fa.fa-info-circle
      Properties
  %li.nav-item
    %a#collections-tab.nav-link{href: "#collections-tab-content",
                                "data-toggle": "tab",
                                role: "tab",
                                "aria-controls": "collections-tab-content",
                                "aria-selected": "true"}
      = icon_for(Collection)
      Collections
  %li.nav-item
    %a#access-tab.nav-link{href: "#access-tab-content",
                           "data-toggle": "tab",
                           role: "tab",
                           "aria-controls": "access-tab-content",
                           "aria-selected": "true"}
      %i.fa.fa-users
      Access

.tab-content
  #metadata-tab-content.tab-pane.fade.show.active{role: "tabpanel",
                                                  "aria-labelledby": "metadata-tab"}
    = metadata_as_dl(@resource.effective_metadata_profile,
                     @resource.elements)

  #properties-tab-content.tab-pane.fade{role: "tabpanel",
                                        "aria-labelledby": "properties-tab"}
    %dl
      - if @resource.submitter
        - submitter = @resource.submitter.becomes(User)
        %dt Submitter
        %dd
          - if policy(submitter).show?
            = link_to(submitter.name, submitter)
          - else
            = submitter.name
      %dt In archive
      %dd= @resource.in_archive
      %dt Withdrawn
      %dd= @resource.withdrawn
      %dt Discoverable
      %dd= @resource.discoverable
      %dt Created
      %dd= @resource.created_at
      %dt Last Updated
      %dd= @resource.updated_at

  #collections-tab-content.tab-pane{role: "tabpanel",
                                    "aria-labelledby": "collections-tab"}
    = resource_list(@collections)

  #access-tab-content.tab-pane{role: "tabpanel",
                               "aria-labelledby": "access-tab"}
    %h3 Unit Administrators
    - admins = @resource.all_unit_administrators
    - if admins.any?
      %ul
        - admins.each do |user|
          %li= link_to(user.name, "mailto:#{user.email}")
    - else
      None
    %h3 Collection Managers
    - managers = @resource.all_collection_managers
    - if managers.any?
      %ul
        - managers.each do |user|
          %li= link_to(user.name, "mailto:#{user.email}")
    - else
      None
    %h3 Collection Submitters
    - submitters = @resource.all_collection_submitters
    - if submitters.any?
      %ul
        - submitters.each do |user|
          %li= link_to(user.name, "mailto:#{user.email}")
    - else
      None

= render partial: "shared/ajax_modal",
         locals: { id: "edit-item-metadata-modal",
                   title: "Edit Metadata" }
= render partial: "shared/ajax_modal",
         locals: { id: "edit-item-properties-modal",
                   title: "Edit Properties" }