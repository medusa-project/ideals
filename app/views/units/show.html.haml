- provide :body_id, "show_unit"
- provide :title, @unit.title

= render partial: "show_button_group"

%h1
  = icon_for(@unit)
  = @unit.title

.row
  .col-sm-5.col-md-4.col-lg-3
    %ul.nav.nav-pills.flex-column{role: "tablist",
                                  "aria-orientation": "vertical"}
      %li.nav-item
        %a#properties-tab.nav-link.active{"aria-controls": "properties-tab-content",
                                          "aria-selected": "false",
                                          "data-toggle": "pill",
                                          href: "#properties-tab-content",
                                          role: "tab"}
          = icon_for(:info)
          Properties
      %li.nav-item{role: "presentation"}
        %a#units-tab.nav-link{"aria-controls": "units-tab-content",
                              "aria-selected": "false",
                              "data-toggle": "pill",
                              href: "#units-tab-content",
                              role: "tab"}
          = icon_for(Unit)
          Unit Membership
      %li.nav-item{role: "presentation"}
        %a#collections-tab.nav-link{"aria-controls": "collections-tab-content",
                                    "aria-selected": "false",
                                    "data-toggle": "pill",
                                    href: "#collections-tab-content",
                                    role: "tab"}
          = icon_for(Collection)
          Collections
      %li.nav-item{role: "presentation"}
        %a#items-tab.nav-link{href: "#items-tab-content",
                              "data-toggle": "pill",
                              role: "tab",
                              "aria-controls": "items-tab-content",
                              "aria-selected": "true"}
          = icon_for(Item)
          Items
      - if policy(@unit).edit_access?
        %li.nav-item{role: "presentation"}
          %a#access-tab.nav-link{"aria-controls": "access-tab-content",
                                 "aria-selected": "false",
                                 "data-toggle": "pill",
                                 href: "#access-tab-content",
                                 role: "tab"}
            %i.fa.fa-users
            Access
      %li.nav-item{role: "presentation"}
        %a#statistics-tab.nav-link{"aria-controls": "statistics-tab-content",
                                   "aria-selected": "false",
                                   "data-toggle": "pill",
                                   "data-unit-id": @unit.id,
                                   href: "#statistics-tab-content",
                                   role: "tab"}
          %i.fa.fa-chart-bar
          Statistics

  .tab-content.col-sm-7.col-md-8.col-lg-9
    #properties-tab-content.tab-pane.fade.show.active{"aria-labelledby": "properties-tab",
                                                      role: "tabpanel"}
      = render partial: "show_properties_tab"

    #units-tab-content.tab-pane.fade{"aria-labelledby": "units-tab",
                                     role: "tabpanel"}
      = render partial: "show_membership_tab"

    #collections-tab-content.tab-pane.fade{"aria-labelledby": "collections-tab",
                                           role: "tabpanel"}
      = render partial: "show_collections_tab"

    #items-tab-content.tab-pane.fade{"aria-labelledby": "items-tab",
                                     role: "tabpanel"}
      = render partial: "show_items_tab"

    - if policy(@unit).edit_access?
      #access-tab-content.tab-pane.fade{"aria-labelledby": "access-tab",
                                        role: "tabpanel"}
        = render partial: "show_access_tab"

    #statistics-tab-content.tab-pane.fade{"aria-labelledby": "access-tab",
                                          role: "tabpanel"}
      .card
        .card-body
          = form_tag(unit_statistics_path(@unit), class: "form-inline") do
            = date_range_picker
      .mt-3
        = spinner
      #statistics-xhr-content

= render partial: "shared/ajax_modal",
         locals: { id: "edit-unit-properties-modal",
                   title: "Edit Properties" }
= render partial: "shared/ajax_modal",
         locals: { id: "edit-unit-access-modal",
                   title: "Edit Access" }
= render partial: "shared/ajax_modal",
         locals: { id: "edit-unit-membership-modal",
                   title: "Change Unit Membership" }
= render partial: "collections/add_modal",
         locals: { primary_unit: @unit,
                   title: "Add Collection" }