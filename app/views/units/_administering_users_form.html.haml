-# frozen_string_literal: true
-#
-# Required locals:
-#
-# unit [Unit]
-#
= form_for(unit, remote: true) do |f|
  .error-messages
    -# populated via ajax by shared/_validation_messages.js.erb

  -# Include a random property because `unit` is required in the params
  = f.hidden_field :parent_id, value: f.object.parent_id

  = hidden_field_tag "administering_users[]"
  - user_strings = f.object.administering_users.each.map(&:to_autocomplete)
  - user_strings << "" if user_strings.empty?
  - user_strings.each do |user_str|
    .input-group.mb-3.user
      = text_field_tag "administering_users[]", user_str,
                       autocomplete: "off",
                       class: "form-control"
      %button.btn.btn-outline-danger.remove{type: "button"}
        %i.fa.fa-minus
        Remove
      .dropdown-menu
        -# populated by javascript
  %button.btn.btn-sm.btn-outline-success.add
    %i.fa.fa-plus
    Add User

  .clearfix
    .float-end
      %button.btn.btn-light{"data-bs-dismiss": "modal", type: "button"} Cancel
      = f.submit("Save Changes", class: "btn btn-primary")
