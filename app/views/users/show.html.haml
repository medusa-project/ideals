- provide :body_id, "show_user"
- provide :title, @resource.name

= render partial: "show_button_group"

%h1
  =icon_for(@resource)
  =@resource.name

%ul.nav.nav-tabs{role: "tablist"}
  %li.nav-item
    %a#account-tab.nav-link.active{"data-toggle": "tab",
                                   href: "#account",
                                   role: "tab",
                                   "aria-controls": "account",
                                   "aria-selected": "true"} Account
  %li.nav-item
    %a#items-tab.nav-link{"data-toggle": "tab",
                          href: "#items",
                          role: "tab",
                          "aria-controls": "items",
                          "aria-selected": "false"}
      Submitted Items
      %span.badge.badge-pill.badge-secondary
        = @items.count

.tab-content
  #account.tab-pane.show.active{role: "tabpanel",
                                "aria-labelledby": "account-tab"}
    %dl
      %dt UID
      %dd= @resource.uid
      %dt Username
      %dd= @resource.username
      %dt Email
      %dd= link_to(@resource.email, "mailto:#{@resource.email}")
      - if @resource.phone
        %dt Phone
        %dd
          = link_to(@resource.phone, "tel:#{@resource.phone}")
      %dt System Administrator
      %dd= @resource.sysadmin? ? "Yes" : "No"
      %dt Type
      %dd= @resource.type
      %dt Created
      %dd= @resource.created_at
  #items.tab-pane{role: "tabpanel", "aria-labelledby": "items-tab"}
    - if @items.count.positive?
      = form_tag(user_path(@resource), method: :get, class: "filter") do
        .row.justify-content-between
          .col-4
            .input-group.mb-3.filter-field
              = hidden_field_tag("fq[]", "#{Item::IndexFields::SUBMITTER}:#{@resource.id}")
              = filter_field(icon: "fa fa-filter", submit_text: "Filter")
          .col-4
            .input-group
              = sort_menu(MetadataProfile.default)
      = render partial: "items/listing"
    - else
      This user has not submitted any items.

= render partial: "shared/ajax_modal",
         locals: { id: "edit-user-modal", title: "Edit User" }