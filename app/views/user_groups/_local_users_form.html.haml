-# @param user_group [UserGroup]

= form_for(user_group, remote: true) do |f|
  .error-messages
    -# populated via ajax by shared/_validation_messages.js.erb

  = hidden_field_tag "user_group[user_ids][]"
  %table.table
    %tbody
      - users = User.where(auth_method: User::AuthMethod::LOCAL)
      - if f.object.institution
        - users = users.where(institution: f.object.institution)
      - users.order(:name).each do |user|
        %tr
          %td
            .form-check
              = check_box_tag "user_group[user_ids][]", user.id,
                              f.object.users.include?(user),
                              { id: "user_group_user_ids_#{user.id}", class: "form-check-input" }
          %td
            = label_tag "user_group_user_ids_#{user.id}",
              user.name, class: "form-check-label"
            %br
            = user.email
          %td
            = user.institution.name

  .clearfix
    .float-end
      %button.btn.btn-light{"data-bs-dismiss": "modal", type: "button"} Cancel
      = f.submit("Save Changes", class: "btn btn-primary")
