- show_sysadmin_content = policy(@bitstream.item).show_sysadmin_content?

#file-navigator-viewer-header
  %h4= @bitstream.original_filename
  .btn-group{role: "group"}
    - if show_sysadmin_content
      -# Edit button
      %button.btn.btn-dark.edit-bitstream{"data-item-id":      @bitstream.item_id,
                                          "data-bitstream-id": @bitstream.id,
                                          "data-target":       "#edit-bitstream-modal",
                                          "data-toggle":       "modal",
                                          type:                "button"}
        %i.fas.fa-pencil-alt
        Edit
      -# More Info button
      %button#more-info.btn.btn-dark{type: "button"}
        %i.fa.fa-info-circle
        More Info

#file-navigator-viewer-content
  = viewer_for(@bitstream)

  #file-navigator-viewer-info
    %dl
      - if @bitstream.format
        %dt Format
        %dd= @bitstream.format.long_name
      %dt Media Type
      %dd
        %code= @bitstream.media_type
      %dt Size
      %dd= number_to_human_size(@bitstream.length)
      - if show_sysadmin_content
        %dt Database ID
        %dd= @bitstream.id
      %dt API Resource
      %dd= link_to(item_bitstream_path(@bitstream.item, @bitstream), |
                   item_bitstream_path(@bitstream.item, @bitstream)) |
      %dt Bundle
      %dd= Bitstream::Bundle.label(@bitstream.bundle)
      - if @bitstream.exists_in_staging && @bitstream.staging_key
        %dt Staging Key
        %dd
          %code= @bitstream.staging_key
      - else
        %dt Exists in Staging
        %dd= boolean(false, style: :word)
      %dt Submitted For Ingest
      %dd= boolean(@bitstream.submitted_for_ingest, style: :word)
      - if @bitstream.medusa_uuid
        %dt Medusa UUID
        %dd= link_to(@bitstream.medusa_uuid, @bitstream.medusa_url)
        %dt Medusa Key
        %dd= @bitstream.medusa_key
      - else
        %dt Exists in Medusa
        %dd= boolean(false, style: :word)
        %dt Minimum Access Role
        %dd= Role.label(@bitstream.role)
      %dt Download Count
      %dd= number_with_delimiter(@bitstream.download_count)

#file-navigator-viewer-footer
  - if policy(@bitstream).download?
    -# Download button
    = link_to(item_bitstream_object_path(@bitstream.item, @bitstream), class: "btn btn-success") do
      %i.fa.fa-download
      Download
